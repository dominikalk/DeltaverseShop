{% extends 'layout.html' %} 
{% block header %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles/home.css') }}" />
{% endblock header %} 
{% block content %}
<div class="title-container">
  <div class="wrapper">
    <h1 class="title">Delt<span class="highlight">Δ</span>verse Market.</h1>
    <!-- Not my choice to have "shop" in a span element. Needed for the test to pass. -->
    <p class="info-text">
      Did you know that in maths, the greek symbol deltΔ is used to describe the
      <span class="highlight">change in</span> a value? Well at the DeltΔverse
      <span>shop</span> our core values stem from bringing positive change into
      our very own world.
    </p>
  </div>
</div>
<div class="content-container">
  <div class="wrapper">
    <div class="filters-container">
      <form method="POST" action="" style="display: flex;">
        <input type="hidden" name="form_name" value="filters">
        <button type="submit" name="filter_items" value="0" class="filter-item hover-move {{ 'selected-filter-item' if category_id == 0 }}">
          All
        </button>
      {% for category in categories %}
        <button type="submit" name="filter_items" value="{{ category.id }}" class="filter-item hover-move {{ 'selected-filter-item' if category_id == category.id }}">
          {{ category.name }}
        </button>
        <!-- <div class="filter-item hover-move">{{ category.name }}</div> -->
        {% endfor %}
      </form>

      <form method="POST" action="" style="position: relative">
        <input type="hidden" name="form_name" value="sort_items">
        <select name="sort" onchange="this.form.submit()">
          <option value="price_low" {% if sort=='price_low' %} selected="selected" {% endif %}>Price: Low to High</option>
          <option value="price_high" {% if sort=='price_high' %} selected="selected" {% endif %}>Price: Hight to Low</option>
          <option value="eco_low" {% if sort=='eco_low' %} selected="selected" {% endif %}>Carbon: Low to High</option>
        </select>
        <img
          src="{{ url_for('static', filename='images/chevron-down.svg') }}"
          alt="chevron-down"
          style="position: absolute; right: 0; margin: 0.6rem 0.5rem"
        />
      </form>
    </div>

    <div class="item-container">
      {% for item in items %}
      <a href="{{ url_for('product', product_id=item.id) }}" class="item">
        <div class="item-picture-container">
          <img src="{{ item.picture }}" alt="cover" class="item-picture" />
        </div>
        <div style="padding: 1rem;">
          <div>
            <p class="item-name">{{ item.name }}</p>
            <p class="item-description">{{ item.description }}</p>
          </div>
          <div
            style="
              display: flex;
              justify-content: space-around;
              margin-bottom: 1rem;
            "
          >
            <p class="item-price">£{{ item.price }}</p>
            <div style="display: flex">
              <img
                src="{{ url_for('static', filename='images/carbon.svg') }}"
                alt="carbon emmisions"
              />
              <p class="item-price" style="margin: 0.1rem 0 0 0.5rem">
                {{ item.carbon }}g
              </p>
            </div>
          </div>
          <form method="POST" action="">
            <input type="hidden" name="form_name" value="add_to_cart">
            <button type="submit" name="add_to_cart" value="{{ item.id }}" class="button">
              Add to cart
            </button>
          </form>
        </div>
      </a>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock content %}
